webpackJsonp([1],{"3Qwh":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.pageTitle[data-v-74b9fc4c]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center\n}\n.pageTitle .left[data-v-74b9fc4c]{-webkit-box-flex:1;-ms-flex:1;flex:1\n}\n.pageTitle .right[data-v-74b9fc4c]{width:420px;margin-right:0px;text-align:right;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end\n}\n.pageTitle .right .el-input[data-v-74b9fc4c]{margin-right:20px;width:310px;display:block\n}\n.formTable[data-v-74b9fc4c]{margin-top:30px;margin-bottom:30px\n}\n.formTable tr td[data-v-74b9fc4c]{color:rgba(0,0,0,0.5);padding:6px;font-size:16px\n}\n.formTable tr td[data-v-74b9fc4c]:first-child{text-align:right;color:rgba(0,0,0,0.7)\n}\n.formTable tr td a[data-v-74b9fc4c]{color:#409EFF;-webkit-text-decoration:solid #409EFF 1px;text-decoration:solid #409EFF 1px\n}\n.black[data-v-74b9fc4c]{height:8px;background:#f4f4f4;width:calc( 100% + 24px);margin-left:-12px;margin-top:12px\n}\n.el-table .cell[data-v-74b9fc4c]{font-family:Consolas\n}\n.el-pagination[data-v-74b9fc4c]{margin-top:14px;text-align:right\n}\n.payRecord[data-v-74b9fc4c]{margin:20px\n}\n.payRecord .one[data-v-74b9fc4c]{border-bottom:dashed #cccccc 1px\n}\n",""])},sMnm:function(t,e,a){var i=a("3Qwh");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("3e094dec",i,!0,{})},zBGv:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("GGsn"),n=!!localStorage.userListType&&JSON.parse(localStorage.userListType),o={data:function(){return{payRecordShow:!1,searchKey:"",searchDate:"",dialogVisible:!1,form:{},tableData:[],vipData:{},onePayRecord:[],vip:{show:!1,data:{}},allCount:0,page:sessionStorage.vipmanagePage?JSON.parse(sessionStorage.vipmanagePage):1,pageSize:100,isPaid:n,loading:!1}},methods:{search:function(){var t=this.searchKey;console.log(t),t?this.queryOneUser(t,"list"):this.vipList(1,this.pageSize,this.isPaid)},goPage:function(t){this.page=t,sessionStorage.vipmanagePage=t,this.vipList(this.page,this.pageSize,this.isPaid)},view:function(t){console.log(t),this.form=t,this.dialogVisible=!0},payList:function(t){var e=this;console.log(t);var a=t.openId;Object(i.b)(a).then(function(t){console.log(t),e.onePayRecord=t.map(function(t){return t.total_fee=(t.total_fee/100).toFixed(2),t.time_end=e.$moment(t.time_end,"YYYYMMDDHHmmss").format("YYYY-MM-DD HH:mm:ss"),t}),e.payRecordShow=!0})},vipList:function(t,e,a){var n=this;this.loading=!0,Object(i.i)(t,e,a).then(function(t){n.tableData=t.result.map(function(t){return t.regTime=n.$moment(Number(t.regTime)).format("YYYY-MM-DD HH:mm:ss"),t.payTime&&(t.payTime=n.$moment(Number(t.payTime)).format("YYYY-MM-DD HH:mm:ss")),t.lastTime&&"forever"!=t.lastTime&&(t.lastTime=n.$moment(Number(t.lastTime)).format("YYYY-MM-DD HH:mm:ss")),t}),n.allCount=t.total}).finally(function(){this.loading=!1}.bind(this))},changeType:function(t){localStorage.userListType=t,this.vipList(this.page,this.pageSize,this.isPaid)},queryOneUser:function(t,e){var a=this;Object(i.h)(t).then(function(t){t.regTime=a.$moment(Number(t.regTime)).format("YYYY-MM-DD HH:mm:ss"),t.payTime=a.$moment(Number(t.payTime)).format("YYYY-MM-DD HH:mm:ss"),e?a.tableData=[t]:(a.vip.data=t,a.vip.show=!0)})}},mounted:function(){this.vipList(1,this.pageSize,this.isPaid),this.searchDate=this.$moment().format("YYYYMMDD")},computed:{tableHeight:function(){return this.$store.state.windowSize.height-200}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{margin:"12px",padding:"12px"}},[a("div",{staticClass:"pageTitle"},[a("div",{staticClass:"left"},[t._v("用户管理")]),t._v(" "),a("div",{staticClass:"right"},[a("div",[a("el-input",{attrs:{"prefix-icon":"el-icon-search",placeholder:"请输入openid搜索",size:"small",clearable:""},on:{change:t.search},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}})],1),t._v(" "),a("div",[a("span",[t._v("VIP")]),t._v(" "),a("el-switch",{on:{change:t.changeType},model:{value:t.isPaid,callback:function(e){t.isPaid=e},expression:"isPaid"}})],1)])]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%","font-family":"Consolas"},attrs:{data:t.tableData,height:t.tableHeight,border:""}},[a("el-table-column",{attrs:{prop:"openId",label:"openId",width:"280"}}),t._v(" "),a("el-table-column",{attrs:{prop:"isPaid",label:"VIP"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isPaid?a("span",{staticStyle:{color:"green"}},[t._v("是")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"lastTime",label:"到期",width:"170"}}),t._v(" "),a("el-table-column",{attrs:{prop:"payTime",label:"支付日期",width:"170"}}),t._v(" "),a("el-table-column",{attrs:{prop:"regTime",label:"注册日期",width:"170"}}),t._v(" "),a("el-table-column",{attrs:{prop:"freeCount",label:"试用次数",width:"90",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.queryOneUser(e.row.openId)}}},[t._v("详细")]),t._v(" "),e.row.isPaid?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.payList(e.row)}}},[t._v("支付记录")]):t._e()]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.page,"page-size":t.pageSize,layout:"total, prev, pager, next",total:t.allCount},on:{"current-change":t.goPage,"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e}}}),t._v(" "),a("el-dialog",{attrs:{title:t.form.Title,visible:t.dialogVisible,width:"500px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("table",{staticClass:"formTable"},[a("tr",[a("td",[t._v("名称")]),t._v(" "),a("td",[t._v(t._s(t.form.Title))])]),t._v(" "),a("tr",[a("td",[t._v("购买时间")]),t._v(" "),a("td",[t._v(t._s(t.form.Date))])]),t._v(" "),a("tr",[a("td",[t._v("类型")]),t._v(" "),a("td",[t._v(t._s(t.form.Type))])]),t._v(" "),a("tr",[a("td",[t._v("价格")]),t._v(" "),a("td",[t._v(t._s(t.form.Price))])]),t._v(" "),a("tr",[a("td",[t._v("登录地址")]),t._v(" "),a("td",[a("a",{attrs:{href:"https://www.baidu.com",target:"_blank"}},[t._v("https://www.baidu.com")])])])])]),t._v(" "),a("el-drawer",{attrs:{title:"会员信息",visible:t.vip.show,size:"500px"},on:{"update:visible":function(e){return t.$set(t.vip,"show",e)}}},[a("table",{staticClass:"formTable"},[a("tr",[a("td",{attrs:{width:"120px"}},[t._v("openId")]),t._v(" "),a("td",[t._v(t._s(t.vip.data.openId))])]),t._v(" "),a("tr",[a("td",[t._v("来源")]),t._v(" "),a("td",[t._v(t._s(t.vip.data.payFrom))])]),t._v(" "),a("tr",[a("td",[t._v("免费次数")]),t._v(" "),a("td",[t._v(t._s(t.vip.data.freeCount))])]),t._v(" "),a("tr",[a("td",[t._v("过期")]),t._v(" "),a("td",[t._v(t._s(t.vip.data.overdue))])]),t._v(" "),a("tr",[a("td",[t._v("过期时间")]),t._v(" "),a("td",[t._v(t._s(t.vip.data.lastTime))])]),t._v(" "),a("tr",[a("td",[t._v("支付时间")]),t._v(" "),a("td",[t._v(t._s(t.vip.data.payTime))])]),t._v(" "),a("tr",[a("td",[t._v("注册时间")]),t._v(" "),a("td",[t._v(t._s(t.vip.data.regTime))])]),t._v(" "),a("tr",[a("td",[t._v("unionid")]),t._v(" "),a("td",[t._v(t._s(t.vip.data.unionid))])]),t._v(" "),a("tr",[a("td",[t._v("是否付费")]),t._v(" "),a("td",[t._v(t._s(t.vip.data.isPaid))])])])]),t._v(" "),a("el-drawer",{attrs:{title:"会员支付记录",visible:t.payRecordShow,direction:"rtl",size:"600px"},on:{"update:visible":function(e){t.payRecordShow=e}}},[a("div",{staticClass:"payRecord"},[a("el-table",{attrs:{data:t.onePayRecord}},[a("el-table-column",{attrs:{prop:"time_end",label:"日期",width:"170"}}),t._v(" "),a("el-table-column",{attrs:{prop:"total_fee",label:"金额",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"transaction_id",label:"订单号"}})],1)],1)])],1)},staticRenderFns:[]};var l=a("VU/8")(o,s,!1,function(t){a("sMnm")},"data-v-74b9fc4c",null);e.default=l.exports}});